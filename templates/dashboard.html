{% extends "base.html" %}

{% block content %}
<div class="space-y-6">
    <!-- Page title -->
    <div class="text-center">
        <h2 class="text-3xl font-bold text-gray-900">Email Management Dashboard</h2>
        <p class="text-gray-600 mt-2">Analyze and manage your emails 50 at a time</p>
    </div>

    <!-- Simplified Statistics cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-white p-6 rounded-lg shadow border">
            <h3 class="text-sm font-medium text-gray-500">Pages Analyzed</h3>
            <p class="text-2xl font-bold text-blue-600">{{ stats.pages_analyzed }}</p>
            <p class="text-xs text-gray-400">({{ stats.pages_analyzed * 50 }} emails total)</p>
        </div>
        <div class="bg-white p-6 rounded-lg shadow border">
            <h3 class="text-sm font-medium text-gray-500">Total Deleted</h3>
            <p class="text-2xl font-bold text-red-600">{{ stats.total_deleted }}</p>
        </div>
    </div>

    <!-- Two-Button Interface -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        
        <!-- Analyze Next 50 -->
        <div class="bg-white p-8 rounded-lg shadow border">
            <h3 class="text-xl font-semibold text-gray-900 mb-4">üîç Analyze Next 50 Emails</h3>
            <p class="text-gray-600 mb-6">Process the next batch of 50 emails with AI analysis</p>
            
            <form method="POST" action="{{ url_for('start_analysis') }}">
                <button type="submit" 
                        class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium text-lg">
                    Analyze Next 50
                </button>
            </form>
        </div>

        <!-- Review Latest Analysis -->
        <div class="bg-white p-8 rounded-lg shadow border">
            <h3 class="text-xl font-semibold text-gray-900 mb-4">ÔøΩ Review Analysis</h3>
            {% if latest_run_id %}
                <p class="text-gray-600 mb-6">Review and confirm deletions from latest analysis</p>
                <a href="{{ url_for('review_emails', run_id=latest_run_id) }}" 
                   class="w-full inline-block text-center bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-medium text-lg">
                    Review Latest 50
                </a>
            {% else %}
                <p class="text-gray-500 mb-6">No analysis available to review yet</p>
                <button class="w-full bg-gray-300 text-gray-500 px-6 py-3 rounded-lg cursor-not-allowed font-medium text-lg" disabled>
                    No Analysis to Review
                </button>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}